:root{
  --toolbar-height:48px;
  --panel-width:260px;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:system-ui,Segoe UI,Roboto,"Noto Sans KR",sans-serif;-webkit-font-smoothing:antialiased}
#toolbar{
  height:var(--toolbar-height);
  display:flex;
  align-items:center;
  gap:8px;
  padding:6px;
  background:#f1f1f1;
  border-bottom:1px solid #ddd;
  flex-wrap:wrap;
  z-index:900;
}
#canvas-container{
  position:relative;
  flex:1;
  height:calc(100vh - var(--toolbar-height));
  overflow:hidden;
  background: #fff;
  touch-action:none;
}
canvas{
  position:absolute;
  top:0; left:0;
  width:100%;
  height:100%;
  touch-action:none;
  -webkit-user-select:none;
  user-select:none;
}

/* Layer panel as floating window */
#layers-panel{
  position:fixed;
  top:calc(var(--toolbar-height) + 10px);
  right:10px;
  width:var(--panel-width);
  max-height:70vh;
  overflow:auto;
  background:rgba(255,255,255,0.98);
  border:1px solid #bbb;
  padding:8px;
  box-shadow:0 6px 18px rgba(0,0,0,0.12);
  z-index:1000;
  display:none;
}
#layers-panel.visible{display:block}

.layer-item{
  display:flex;
  align-items:center;
  gap:6px;
  padding:6px;
  border-radius:6px;
  border:1px solid transparent;
  margin-bottom:6px;
}
.layer-item.active{background:#eef; border-color:#cce}
.layer-item span.name{flex:1; font-size:13px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap}
.layer-controls{display:flex; gap:4px; align-items:center}
.layer-controls button{font-size:13px; padding:4px 6px;}

/* gallery */
#gallery-panel{
  position:fixed;
  bottom:10px;
  left:10px;
  width:260px;
  max-height:40vh;
  overflow:auto;
  background:rgba(255,255,255,0.95);
  border:1px solid #bbb;
  padding:8px;
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  z-index:900;
}
.gallery-item{
  width:60px; height:60px; object-fit:cover; border:1px solid #999; cursor:pointer;
}

/* overlay confirm/cancel */
.overlay-action{
  position:fixed;
  z-index:1100;
  bottom:12px;
  right:12px;
  display:flex;
  gap:8px;
}
.overlay-action button{
  font-size:18px;
  padding:8px 12px;
  border-radius:8px;
  border:1px solid #888;
  background:#fff;
  box-shadow:0 3px 8px rgba(0,0,0,0.12);
}

/* responsive small screens - reduce panel width */
@media (max-width:600px){
  #layers-panel{ width:200px; right:6px; }
  #gallery-panel{ width:200px; left:6px; }
  .overlay-action{ right:6px; bottom:6px }
}
